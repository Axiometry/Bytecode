apply plugin: 'java'
apply plugin: 'eclipse'

sourceCompatibility = 1.8
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
	/* Commons             */ compile group: 'commons-lang',        name: 'commons-lang',        version: '2.6'
    /* Commons Collections */ compile group: 'commons-collections', name: 'commons-collections', version: '3.2'
	/* ObjectWeb ASM       */ compile group: 'org.ow2.asm',         name: 'asm-all',             version: '5.0.3'
	/* Guava               */ compile group: 'com.google.guava',    name: 'guava',               version: '17.0'

	testCompile group: 'junit', name: 'junit', version: '4.+'
}

eclipse {
	classpath {
		downloadSources = true
		
		def hasContainer = true
		containers.clear()
		
		file.beforeMerged { classpath ->
			if(!classpath.entries.find { entry -> entry.kind == 'con' }) {
				containers.add('org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8')
				hasContainer = false
			}
		}
		
		file.whenMerged { classpath ->
			if(!hasContainer)
				classpath.entries.findAll { entry -> entry.kind == 'con' }*.exported = false
		}
	}
}